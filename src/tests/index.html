<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Socket.IO Chat Example</title>

  <ul class="pages">
    <li class="chat page">
      <div class="chatArea">
        <ul class="messages"></ul>
      </div>
      <input class="inputMessage" placeholder="Type here..."/>
    </li>
  </ul>

</head>
<body>
  <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script src="G:\socket.io\examples\samples\node_modules\socket.io-client\dist\socket.io.js"></script>
  <!-- <script src="G:\socket.io\examples\samples\node_modules\@azure\web-pubsub\dist\index.js"></script> -->
  <script>
    // const url = 'http://localhost:9001';
    const url = "ws://localhost:8080/client/hubs/Hub?access_token=...";
    const socket = io(url, {transports:['websocket'], reconnection: false, path:"/client/hubs/Hub"});
    socket.connect();

    socket.on('connection', function () { console.log('connection!'); });
    socket.on('connected', function () { console.log('connected!'); });
    socket.on('connect', function () { console.log('connect!'); });
      
    $(window).keydown(event => {
      if (event.which === 13) {
        if (socket.connected === false) { alert("not connected"); return ;}
        socket.emit("echo", $('.inputMessage').val())
        $('.inputMessage').val("");
      }
    });

  </script>
</body>
</html>